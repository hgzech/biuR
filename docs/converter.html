---

title: Converter


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "notebooks/02_converter.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/02_converter.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Functions">Functions<a class="anchor-link" href="#Functions"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="dict2ri" class="doc_header"><code>dict2ri</code><a href="https://github.com/hgzech/biur/tree/main/biur/converter.py#L16" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>dict2ri</code>(<strong><code>D</code></strong>)</p>
</blockquote>
<p>Convert a dictionary to an R ListVector</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dict2ri</span><span class="p">({</span><span class="s2">&quot;test&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

        <span>ListVector with 1 elements.</span>
        <table>
        <tbody>
        
          <tr>
            <th>
            test
            </th>
            <td>
            <rpy2.rinterface.IntSexpVector object at 0x18472b980> [RTYPES.INTSXP]
            </td>
          </tr>
        
        </tbody>
        </table>
        
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ri2dict" class="doc_header"><code>ri2dict</code><a href="https://github.com/hgzech/biur/tree/main/biur/converter.py#L27" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ri2dict</code>(<strong><code>D</code></strong>)</p>
</blockquote>
<p>Convert a StrVector to a dictionary
Note, that this conversion is not the inverse of dict2ri, as R values are always lists...
Thus, ri2dict(dict2ri({'a': 1})) -&gt; { 'a': [1]}</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ri2dict</span><span class="p">(</span><span class="n">dict2ri</span><span class="p">({</span><span class="s2">&quot;test&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">}))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;test&#39;: [2]}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="tuple2ri" class="doc_header"><code>tuple2ri</code><a href="https://github.com/hgzech/biur/tree/main/biur/converter.py#L38" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>tuple2ri</code>(<strong><code>T</code></strong>)</p>
</blockquote>
<p>Convert a tuple to an array.
It is first converted to a numpy array, and then, based on that to an R array</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tuple2ri</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;rpy2.rinterface.IntSexpVector object at 0x184730140&gt; [RTYPES.INTSXP]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="none2ri" class="doc_header"><code>none2ri</code><a href="https://github.com/hgzech/biur/tree/main/biur/converter.py#L51" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>none2ri</code>(<strong><code>N</code></strong>)</p>
</blockquote>
<p>Convert a None type to NULL</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">none2ri</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;rpy2.rinterface_lib.sexp.NULLType object at 0x110861440&gt; [RTYPES.NILSXP]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="datetime2ri" class="doc_header"><code>datetime2ri</code><a href="https://github.com/hgzech/biur/tree/main/biur/converter.py#L59" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>datetime2ri</code>(<strong><code>D</code></strong>)</p>
</blockquote>
<p>Convert a datetime object to an R object</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>{% include warning.html content='Not certain whether this is the intended conversion.' %}</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">datetime2ri</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;12. March 2020&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

        <span>ListVector with 11 elements.</span>
        <table>
        <tbody>
        
          <tr>
            <th>
            [no name]
            </th>
            <td>
            
        <span>FloatVector with 1 elements.</span>
        <table>
        <tbody>
          <tr>
          
            <td>
            0.000000
            </td>
          
          </tr>
        </tbody>
        </table>
        
            </td>
          </tr>
        
          <tr>
            <th>
            [no name]
            </th>
            <td>
            
        <span>IntVector with 1 elements.</span>
        <table>
        <tbody>
          <tr>
          
            <td>
            0
            </td>
          
          </tr>
        </tbody>
        </table>
        
            </td>
          </tr>
        
          <tr>
            <th>
            [no name]
            </th>
            <td>
            
        <span>IntVector with 1 elements.</span>
        <table>
        <tbody>
          <tr>
          
            <td>
            0
            </td>
          
          </tr>
        </tbody>
        </table>
        
            </td>
          </tr>
        
          <tr>
            <th>
            ...
            </th>
            <td>
            ...
            </td>
          </tr>
        
          <tr>
            <th>
            [no name]
            </th>
            <td>
            
        <span>IntVector with 1 elements.</span>
        <table>
        <tbody>
          <tr>
          
            <td>
            0
            </td>
          
          </tr>
        </tbody>
        </table>
        
            </td>
          </tr>
        
          <tr>
            <th>
            [no name]
            </th>
            <td>
            
        <span>StrVector with 1 elements.</span>
        <table>
        <tbody>
          <tr>
          
            <td>
            'EET'
            </td>
          
          </tr>
        </tbody>
        </table>
        
            </td>
          </tr>
        
          <tr>
            <th>
            [no name]
            </th>
            <td>
            
        <span>IntVector with 1 elements.</span>
        <table>
        <tbody>
          <tr>
          
            <td>
            NA_integer_
            </td>
          
          </tr>
        </tbody>
        </table>
        
            </td>
          </tr>
        
        </tbody>
        </table>
        
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="dataframe_non_string_category_wrapper" class="doc_header"><code>dataframe_non_string_category_wrapper</code><a href="https://github.com/hgzech/biur/tree/main/biur/converter.py#L70" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>dataframe_non_string_category_wrapper</code>(<strong><code>S</code></strong>)</p>
</blockquote>
<p>Convert a pandas series to an R object, but convert categories to strings, to overcome the following error:
    <code>Converting pandas "Category" series to R factor is only possible when categories are strings</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataframe_non_string_category_wrapper</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">&quot;Thies&quot;</span><span class="p">,</span> <span class="s2">&quot;Gehrmann&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;rpy2.rinterface_lib.sexp.StrSexpVector object at 0x110f42b00&gt; [RTYPES.STRSXP]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="converter" class="doc_header"><code>converter</code><a href="https://github.com/hgzech/biur/tree/main/biur/converter.py#L93" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>converter</code>()</p>
</blockquote>
<p>Return an rpy2 converter that automatically converts several formats</p>
<p>Automatically added:</p>
<ul>
<li>pandas converted</li>
<li>numpy objects</li>
<li>dict</li>
<li>tuple</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">R</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A wrapper for rpy2, which somewhat mimics the ipython magic functions.</span>
<span class="sd">    Basically, it handles the automatic conversion of some python objects to R objects.</span>
<span class="sd">    Further, it allows you to automatically push python objects, call code and get converted objects back to python.</span>
<span class="sd">    </span>
<span class="sd">    Example usage:</span>
<span class="sd">    --------------</span>
<span class="sd">    </span>
<span class="sd">    r = biu.R()</span>
<span class="sd">    x = pd.DataFrame([[1,2,3],[4,5,6]])</span>
<span class="sd">    r.push(x=x)</span>
<span class="sd">    r(&#39;y = x * 2&#39;)</span>
<span class="sd">    y = r.get(&#39;y&#39;)</span>
<span class="sd">    </span>
<span class="sd">    Or, altogether:</span>
<span class="sd">    ---------------</span>
<span class="sd">    y = r(&#39;y=x*2&#39;, push=dict(x=x), get=&#39;y&#39;)</span>
<span class="sd">    </span>
<span class="sd">    Doing a lot at the same time:</span>
<span class="sd">    -----------------------------</span>
<span class="sd">    </span>
<span class="sd">    y, z = r(&#39;&#39;&#39;</span>
<span class="sd">        y = x * 2</span>
<span class="sd">        z = x + 2</span>
<span class="sd">        &#39;&#39;&#39;, push=dict(x=x), get=[&#39;y&#39;, &#39;z&#39;])</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_converter</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the rpy2 wrapper</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_converter</span>  <span class="o">=</span> <span class="n">converter</span><span class="p">()</span>
    <span class="c1">#edef</span>
    
    <span class="k">def</span> <span class="nf">add_converter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_type</span><span class="p">,</span> <span class="n">convert_func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a converter to the object, if there is one missing.</span>
<span class="sd">        </span>
<span class="sd">        parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        obj_type: the type of the object that this converter relates to</span>
<span class="sd">        convert_func: function. The function that should be applied</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_converter</span><span class="o">.</span><span class="n">py2rpy</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">obj_type</span><span class="p">,</span> <span class="n">convert_func</span><span class="p">)</span>
    <span class="c1">#edef</span>
        
    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Push values to R, based on the current converter</span>
<span class="sd">        </span>
<span class="sd">        parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        kwargs: Dictionary of values</span>
<span class="sd">        </span>
<span class="sd">        Example usage:</span>
<span class="sd">        --------------</span>
<span class="sd">        </span>
<span class="sd">        r.push(x=10, y=&#39;pool&#39;, ages=[10, 50, 100])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="c1">#fi</span>
        
        <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">with</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">localconverter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_converter</span><span class="p">)</span> <span class="k">as</span> <span class="n">cv</span><span class="p">:</span>
                <span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="c1">#ewith</span>
        <span class="c1">#efor</span>
    <span class="c1">#edef</span>
        
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">pargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a value from R, based on the current converter</span>
<span class="sd">        </span>
<span class="sd">        parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        name: return this variable from the R instance</span>
<span class="sd">        *pargs, if specified, return a tuple of name + those in pargs</span>
<span class="sd">        </span>
<span class="sd">        returns:</span>
<span class="sd">        --------</span>
<span class="sd">        Either a converted R object, or</span>
<span class="sd">        if pargs is specified, then a tuple of values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">conversion</span><span class="o">.</span><span class="n">localconverter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_converter</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pargs</span><span class="p">)</span>  <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">globalenv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">[</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">globalenv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">([</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">pargs</span><span class="p">))</span> <span class="p">]</span>
            <span class="c1">#fi</span>
        <span class="c1">#ewith</span>
            
    <span class="c1">#edef</span>
    
    <span class="k">def</span> <span class="nf">exec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">push</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call R code, pushing values, and returning values if necessary</span>
<span class="sd">        </span>
<span class="sd">        parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        cmd: The R code you want to execute</span>
<span class="sd">        push: Dictionary of name:value pairs that you want to introduce to R session</span>
<span class="sd">        get: List of R object values that you want to get back</span>
<span class="sd">        </span>
<span class="sd">        returns:</span>
<span class="sd">        ---------</span>
<span class="sd">        if get is False, it returns nothing.</span>
<span class="sd">        If get is True, it returns the returned value from the R code.</span>
<span class="sd">        if get is not None, it returns a value, as specified by the get() function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">push</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">push</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">#fi</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="o">**</span><span class="n">push</span><span class="p">)</span>
        
        <span class="n">res</span> <span class="o">=</span> <span class="n">rpy2</span><span class="o">.</span><span class="n">robjects</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">get</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="n">get</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_converter</span><span class="o">.</span><span class="n">rpy2py</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">get</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">get</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">get</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">get</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">get</span><span class="p">)</span>
        <span class="c1">#fi</span>
    <span class="c1">#edef</span>
    
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">push</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">get</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call R code, pushing values, and returning values if necessary</span>
<span class="sd">        </span>
<span class="sd">        parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        cmd: The R code you want to execute</span>
<span class="sd">        push: Dictionary of name:value pairs that you want to introduce to R session</span>
<span class="sd">        get: List of R object values that you want to get back</span>
<span class="sd">        </span>
<span class="sd">        returns:</span>
<span class="sd">        ---------</span>
<span class="sd">        if get is False, it returns nothing.</span>
<span class="sd">        If get is True, it returns the returned value from the R code.</span>
<span class="sd">        if get is not None, it returns a value, as specified by the get() function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">push</span><span class="p">,</span> <span class="n">get</span><span class="p">)</span>
    <span class="c1">#edef</span>
    
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;BIU Rpy2 wrapper. See usage examples on github.&gt;&quot;</span>
    <span class="c1">#edef</span>
    
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare a string representation of the class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="c1">#edef</span>
<span class="c1">#eclass</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">R</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;How many apples do you eat per day?&quot;</span><span class="p">)</span>
<span class="n">r</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    dist &lt;- rnorm(n, mean, var)</span>
<span class="s2">    print(mean(dist))</span>
<span class="s2">    print(question)</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">get</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[1] 9.991866
[1] &#34;How many apples do you eat per day?&#34;
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

